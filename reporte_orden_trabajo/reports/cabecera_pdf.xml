<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="cabecera_pdf">
            <t t-if="not o" t-set="o" t-value="doc" />
            <t t-if="not company">
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id" />
                </t>
                <t t-elif="o and 'company_id' in o">
                    <t t-set="company" t-value="o.company_id.sudo()" />
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company" />
                </t>
            </t>
            <!-- HEADER -->
            <div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
                <style type="text/css">
                    table {
                        border-spacing: 0px;
                        border: 1px solid #fff;
                    }
                </style>
                <table style="width:100%; text-align:center; margin-bottom:35px;font-family: 'Arial';">
                    <tr>
                        <td colspan="4" style="text-align: center; font-size:10px;">
                            <strong t-field="company.name" />
                            <strong>NIT:</strong>
                            <span t-field="company.vat"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4" style="text-align: center; font-size:18px;">
                            <strong>ORDEN DE TRABAJO <t t-esc="o.codigo_A1_or_A2"/>-OT<t t-esc="o.mes_secuencia"/></strong>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4" style="text-align: end; font-size:11px;">
                            <strong>Fecha: <t t-esc="o.date_order.strftime('%d/%m/%Y')"/></strong>
                        </td>
                    </tr>
                </table>

                <table border="1" style="width:100%; border-collapse: collapse; font-size: 11px;font-family: 'Arial';">
                    <tr>
                        <td style="width: 40%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td  style="text-align: start;">
                                        <strong>Cuenta:</strong>
                                    </td>
                                    <td style="text-align: start;">
                                        <span t-esc="o.partner_id.name"/>
                                    </td>
                                </tr>
                                <t t-foreach="o.invoice_ids" t-as="factura">
                                    <tr>
                                        <td><strong>Facturar a:</strong></td>
                                        <td>
                                            <div>
                                                <span t-esc="factura.partner_id.name"/> - 
                                                <span t-esc="factura.partner_id.vat"/>
                                            </div>
                                        </td>
                                    </tr>
                                </t>
                                <tr>
                                    <td >
                                        <strong>Direccion:</strong>
                                    </td>
                                    <td >
                                        <span t-esc="o.partner_id.street"/>
                                    </td>
                                </tr>
                                
                            </table>
                        </td>
                        <td style="width: 20%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td >
                                        <strong>Telef./Cel.:</strong>
                                    </td>
                                    <td >
                                        <span t-esc="o.partner_id.mobile"/>
                                    </td>
                                </tr>
                            </table>
                        </td> 
                        <td style="width: 40%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td style="text-align: end;"> 
                                        <strong>Email:</strong>
                                        <span style="font-weight: normal;"  t-esc="o.partner_id.email"/>
                                    </td>
                                </tr>
                                <t t-foreach="o.invoice_ids" t-as="factura">
                                    <tr>
                                        <td style="text-align: end;"> 
                                            <strong>Forma de Pago:</strong>
                                            <span style="font-weight: normal;"  t-esc="factura.payment_type_id.name"/>
                                        </td>
                                    </tr>
                                </t>
                                <t t-foreach="o.invoice_ids" t-as="factura">
                                    <tr>
                                        <td style="text-align: end;"> 
                                            <strong>Plazo:</strong>
                                            <span style="font-weight: normal;" t-esc="o.payment_term_id.name"/>
                                
                                            <strong>Vence:</strong>
                                            <span style="font-weight: normal;" t-esc="factura.invoice_date_due.strftime('%d/%m/%Y')"/>
                                        </td>
                                    </tr>
                                </t>
                            </table>
                        </td> 

                    </tr>
                </table>

                <table border="1" style="width:100%; border-collapse: collapse; font-size: 11px; font-family: 'Arial';">
                    <tr>
                        <td style="width: 50%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td style="text-align: right; padding-right: 5px; width: 40%;">
                                        <strong>TIPO DE VEHICULO:</strong>
                                    </td>
                                    <td style="text-align: left; padding-left: 5px;">
                                        <span t-esc="o.tasks_ids[0].tipo_vehiculo"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right; padding-right: 5px;">
                                        <strong>AÑO:</strong>
                                    </td>
                                    <td style="text-align: left; padding-left: 5px;">
                                        <span t-esc="o.tasks_ids[0].year_vehiculo"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right; padding-right: 5px;">
                                        <strong>COLOR:</strong>
                                    </td>
                                    <td style="text-align: left; padding-left: 5px;">
                                        <span t-esc="o.tasks_ids[0].color_vehiculo"/>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="width: 50%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td style="text-align: right; padding-right: 5px; width: 40%;">
                                        <strong>PLACA:</strong>
                                    </td>
                                    <td style="text-align: left; padding-left: 5px;">
                                        <span t-esc="o.tasks_ids[0].placa_vehiculo"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right; padding-right: 5px;">
                                        <strong>KILOMETRAJE:</strong>
                                    </td>
                                    <td style="text-align: left; padding-left: 5px;">
                                        <span t-esc="o.tasks_ids[0].kilometraje_vehiculo"/>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
                

                <!-- <table border="1" style="width:100%; border-collapse: collapse; font-size: 11px;font-family: 'Arial';">
                    
                    <tr>
                        <td style="width: 80%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td>
                                        <strong>Razón Social:</strong>
                                        <span style="font-weight: normal;" t-if="o.partner_id.name" t-field="o.partner_id.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Glosa:</strong>
                                        <span t-if="o.note" t-field="o.note" style="margin-left: 5px !important;" />
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="width: 20%; vertical-align: top;">
                            <table border="1" style="width: 100%;">
                                <tr>
                                    <td style="text-align: start;">
                                        <strong>Nro.:</strong>
                                    </td>
                                    <td style="text-align: end;">
                                        <span t-esc="o.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: start;">
                                        <strong>Gestión:</strong>
                                    </td>
                                    <td style="text-align: end;">
                                        <span t-esc="o.date_order.year"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: start;">
                                        <strong>Fecha:</strong>
                                    </td>
                                    <td style="text-align: end;">
                                        <span t-esc="o.date_order.strftime('%d/%m/%Y')"/>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table> -->
                
            </div>
            <div class="article" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
                <t t-out="0"/>
            </div>
            <t t-set="current_page" t-value="context.get('page_number', 1)"/>
            <t t-set="total_pages" t-value="context.get('page_count', 1)"/>

            <t t-if="current_page == total_pages">
                <div class="footer" style="margin: 20px 25px 0 25px;">
                    <table style="width: 100%; border-collapse: separate; border-spacing: 10px; font-size: 11px; text-align: center;">
                        <tr>
                            <td style="height: 70px; width: 25%; vertical-align: bottom; border: 1px solid black; border-radius: 5px;"></td>
                            <td style="height: 70px; width: 25%; vertical-align: bottom; border: 1px solid black; border-radius: 5px;"></td>
                            <td style="height: 70px; width: 25%; vertical-align: bottom; border: 1px solid black; border-radius: 5px;"></td>
                            <td style="height: 70px; width: 25%; vertical-align: bottom; border: 1px solid black; border-radius: 5px;"></td>
                        </tr>
                        <tr>
                            <td>Elaborado por</td>
                            <td>Autorizado por</td>
                            <td>Aprobado por G.G.</td>
                            <td>C.I. ...................</td>
                        </tr>
                    </table>
                </div>
            </t>


            
        </template>
    </data>
</odoo>
